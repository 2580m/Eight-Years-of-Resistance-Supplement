add_namespace = EFM_Comchina
# PRC Border War (SHX)
country_event = {
	id = EFM_Comchina.1
	title = EFM_Comchina.1.t
	desc = EFM_Comchina.1.d
	picture = GFX_report_event_chinese_soldiers_fighting

	fire_only_once = yes

	is_triggered_only = yes
	option = {
		name = EFM_Comchina.1.a
		declare_war_on = { target = SHX type = annex_everything }
	}
}
# PRC wins Border War
country_event = {
	id = EFM_Comchina.2
	title = EFM_Comchina.2.t
	desc = EFM_Comchina.2.d
	picture = GFX_report_event_chinese_soldiers_fighting

	is_triggered_only = yes
	trigger = {
		tag = PRC
	}

	option = {
		name = EFM_Comchina.2.a
		add_political_power = 50
		add_stability = 0.05
		add_manpower = -100
		SHX = { country_event = { id = EFM_Comchina.3 } }
		white_peace = SHX
	}
}
# SHX loses Border War
country_event = {
	id = EFM_Comchina.3
	title = EFM_Comchina.3.t
	desc = EFM_Comchina.3.d
	picture = GFX_report_event_chinese_soldiers_fighting

	is_triggered_only = yes
	option = {
		name = EFM_Comchina.3.a
		add_political_power = -50
		add_stability = -0.05
		add_manpower = -300
	}
}
# SHX wins PRC Border War
country_event = {
	id = EFM_Comchina.4
	title = EFM_Comchina.4.t
	desc = EFM_Comchina.4.d
	picture = GFX_report_event_chinese_soldiers_fighting

	is_triggered_only = yes
	trigger = {
		tag = PRC
	}

	option = {
		name = EFM_Comchina.4.a
		add_political_power = -100
		add_stability = -0.05
		add_manpower = -1000
		SHX = { country_event = { id = EFM_Comchina.5 } }
		white_peace = SHX
	}
}
# PRC loses Border War
country_event = {
	id = EFM_Comchina.5
	title = EFM_Comchina.5.t
	desc = EFM_Comchina.5.d
	picture = GFX_report_event_chinese_soldiers_fighting

	is_triggered_only = yes
	option = {
		name = EFM_Comchina.5.a
		add_political_power = 100
		add_stability = 0.05
		add_manpower = -100
	}
}
# PRC into west (NXM)
country_event = {
	id = EFM_Comchina.6
	title = EFM_Comchina.6.t
	desc = EFM_Comchina.6.d
	picture = GFX_report_event_chinese_soldiers_fighting

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = EFM_Comchina.6.a
		declare_war_on = { target = NXM type = annex_everything }
	}
}
# PRC wins NXM Border War (to PRC) #obsolete
country_event = {
	id = EFM_Comchina.7
	title = EFM_Comchina.7.t
	desc = EFM_Comchina.7.d
	picture = GFX_report_event_chinese_soldiers_fighting

	is_triggered_only = yes
	trigger = {
		tag = PRC
	}

	option = {#stop and peace
		name = EFM_Comchina.7.a
		add_political_power = 50
		add_stability = 0.05
		add_manpower = -1000
		if = {
			limit = {
				country_exists = NXM
			}
			NXM = { country_event = { id = EFM_Comchina.8 } }

			set_temp_variable = { temp_member = 1 }
			set_temp_variable = { temp_seats = 0.30 tooltip = ZHANG_faction_support_tt } #GUO
							#percentage
			modify_parliament_seat = yes
		}
		set_country_flag = PRC_west_expedition_victory
		white_peace = NXM
	}

	option = {#continue fight
		name = EFM_Comchina.7.b
		trigger = {
			country_exists = NXM
		}
		add_political_power = 50
		add_stability = 0.05
		add_manpower = -1000
		if = {
			limit = {
				country_exists = NXM
			}
			NXM = { country_event = { id = EFM_Comchina.8 } }

			set_temp_variable = { temp_member = 1 }
			set_temp_variable = { temp_seats = 0.30 tooltip = ZHANG_faction_support_tt } #GUO
								#percentage
			modify_parliament_seat = yes
		}
		set_country_flag = PRC_west_expedition_victory
	}
}
# NXM loses Border War (to NXM) #obsolete
country_event = {
	id = EFM_Comchina.8
	title = EFM_Comchina.8.t
	desc = EFM_Comchina.8.d
	picture = GFX_report_event_chinese_soldiers_fighting

	is_triggered_only = yes

	option = {
		name = EFM_Comchina.8.c
		ai_chance = {
			factor = 100
		}
		add_political_power = -50
		add_stability = -0.05
		add_manpower = -5000
		#CHI = {
		#	country_event = { id = EFM_independent.5 }
		#}
		PRC = { transfer_state = 1044 }
		hidden_effect = {
			#set_country_flag = im_gansu_ma_clique_now
			country_event = {
				id = nxm.1
			}
		}
	}
	option = {
		name = EFM_Comchina.8.a
		ai_chance = {
			factor = 0
		}
		#add_political_power = -50
		add_stability = -0.025
		add_manpower = -1000
		CHI = {
			country_event = { id = EFM_independent.5 }
		}
		PRC = { transfer_state = 1044 }
	}

	option = {
		name = EFM_Comchina.8.b
		ai_chance = {
			factor = 0
		}
		custom_effect_tooltip = GAME_OVER_TT
		CHI = {
			country_event = { id = EFM_independent.6 } #submit to CHI
		}
		PRC = { transfer_state = 1044 }
	}
}
# NXM wins PRC Border War #obsolete
country_event = {
	id = EFM_Comchina.9
	title = EFM_Comchina.9.t
	desc = EFM_Comchina.9.d
	picture = GFX_report_event_chinese_soldiers_fighting

	is_triggered_only = yes
	trigger = {
		tag = PRC
	}

	option = {
		name = EFM_Comchina.9.a
		add_political_power = -100
		add_stability = -0.05
		add_manpower = -3000
		NXM = { country_event = { id = EFM_Comchina.10 } }
		white_peace = NXM
	}
}
# PRC loses Border War
country_event = {
	id = EFM_Comchina.10
	title = EFM_Comchina.10.t
	desc = EFM_Comchina.10.d
	picture = GFX_report_event_chinese_soldiers_fighting

	is_triggered_only = yes
	option = {
		name = EFM_Comchina.10.a
		add_political_power = 100
		add_stability = 0.05
		add_manpower = -300
	}
}

# [global.GetCPC] CONTACT ZHANG XUELIANG
country_event = {
	id = EFM_Comchina.11
	title = EFM_Comchina.11.t
	desc = EFM_Comchina.11.d
	picture = GFX_report_event_zhou_and_zhangxueliang
	trigger = {
		tag = NEA
		#PRC = {
		#	focus_progress = {
		#		focus = PRC_contact_Zhang_Xueliang_focus
		#		progress > 0.4
		#	}
		#}
	}
	is_triggered_only = yes
	option = {
		name = EFM_Comchina.11.a
		#trigger = {#####CHANGE ME IF THE NUMBER OF PRC STARTING STATES CHANGES
		#	PRC = {
		#		num_of_controlled_states < 3
		#	}
		#}
		ai_chance = {#guo
			factor = 10
			modifier = {
				factor = 100
				has_global_flag = PRC_East_conquest_focus_flag
			}
		}
		effect_tooltip = {
			1030 = { set_demilitarized_zone = yes }
			1053 = { set_demilitarized_zone = yes }
		}
		add_political_power = 20
		add_stability = 0.05
		set_global_flag = tacit_truce_flag

		hidden_effect = {
			CHI = {
				country_event = {
					days = 70 id = rcmchina.311
				}
			}

		}
		PRC = {
			country_event = {
				days = 1 id = EFM_Comchina.12
			}
		}
	}
	option = {
		name = EFM_Comchina.11.b
		#trigger = {#####CHANGE ME IF THE NUMBER OF PRC STARTING STATES CHANGES
		#	PRC = {
		#		num_of_controlled_states < 3
		#	}
		#}
		ai_chance = {#guo
			factor = 90
			modifier = {
				factor = 0
				has_global_flag = PRC_East_conquest_focus_flag
			}
		}
		add_stability = -0.05
		add_political_power = -50
		PRC = {
			country_event = {
				days = 1 id = EFM_Comchina.13
			}
		}
		hidden_effect = {

			set_global_flag = zhang_refuses_tacit_truce
		}
	}
	option = {
		name = EFM_Comchina.11.c
		trigger = {#####CHANGE ME IF THE NUMBER OF PRC STARTING STATES CHANGES
			#PRC = {
			#	num_of_controlled_states > 3
			#}
			always = no
		}
		ai_chance = {
			factor = 100
		}
		add_stability = -0.2
		add_political_power = -10
		PRC = {
			country_event = {
				days = 1 id = EFM_Comchina.13
			}
		}
		hidden_effect = {

			set_global_flag = zhang_refuses_tacit_truce
		}
	}
}
country_event = {
	id = EFM_Comchina.12
	title = EFM_Comchina.12.t
	desc = EFM_Comchina.12.d
	picture = GFX_report_event_zhou_and_zhangxueliang
	is_triggered_only = yes
	option = {
		name = EFM_Comchina.12.a
		ai_chance = {
			factor = 100
		}
		add_political_power = 100
		add_stability = 0.05
		
		#guo
		custom_effect_tooltip = gain_base_supp_cond_n5_tt
			add_to_variable = {
		    var = This.supply_condition
			value = 5 #MODDED
		    }
		    add_to_variable = {
			var = This.supply_condition_base
			value = 5 #MODDED
		    }
			add_to_variable = {
				Root.supply_condition_base = 5
			}
			add_equipment_to_stockpile = {
				type = infantry_equipment
				amount = 2500
				producer = NEA
				}
		
		1030 = { set_demilitarized_zone = yes }
		1053 = { set_demilitarized_zone = yes }
		hidden_effect = {
			1030 = { set_state_flag = I_choose_this_state_to_DMZ }
			1053 = { set_state_flag = I_choose_this_state_to_DMZ }
			#NEA = {
			#	country_event = {
			#		id = EFM_Comchina.9013
			#	}
			#}
		}
	}
}
country_event = {
	id = EFM_Comchina.13
	title = EFM_Comchina.13.t
	desc = EFM_Comchina.13.d
	picture = GFX_report_event_chinese_soldiers_fighting
	is_triggered_only = yes
	option = {
		name = EFM_Comchina.13.a
		ai_chance = {
			factor = 100
		}
		add_political_power = -50
		add_stability = -0.05
	}
}
#country_event = { # DMZ loop # SEND THIS TO THE LOOP COUNTRY
#	id = EFM_Comchina.9013
#	hidden = yes
#	is_triggered_only = yes
#	trigger = {
#		NOT = {
#			has_country_flag = DMZ_you_shall_stop_now_flag
#		}
#	}
#	immediate = {
#		every_state = {
#			limit = {
#				is_demilitarized_zone = yes
#				has_state_flag = I_choose_this_state_to_DMZ #set it when setting a new DMZ
#			}
#			set_state_flag = DMZ_state_flag@ROOT
#			clr_state_flag = I_choose_this_state_to_DMZ
#		}
#		ROOT = {
#			country_event = {
#				days = 2 id = EFM_Comchina.9014
#			}
#		}
#	}
#	option = {
#	}
#}
#country_event = { # DMZ loop
#	id = EFM_Comchina.9014
#	hidden = yes
#	is_triggered_only = yes
#	trigger = {
#		any_state = {
#			#is_demilitarized_zone = yes
#			has_state_flag = DMZ_state_flag@ROOT
#		}
#		NOT = {
#			has_country_flag = DMZ_you_shall_stop_now_flag
#		}
#	}
#	immediate = {
#		every_state = {
#			limit = {
#				is_demilitarized_zone = yes
#				has_state_flag = DMZ_state_flag@ROOT
#			}
#			#set_demilitarized_zone = no
#			set_demilitarized_zone = yes
#		}
#		every_state = {
#			limit = {
#				is_demilitarized_zone = no
#				has_state_flag = DMZ_state_flag@ROOT
#			}
#			set_demilitarized_zone = yes
#		}
#		ROOT = {
#			country_event = {
#				id = EFM_Comchina.9013
#			}
#		}
#	}
#	option = {
#	}
#}
#country_event = { # DMZ loop stop# SEND THIS TO THE LOOP COUNTRY
#	id = EFM_Comchina.9015
#	hidden = yes
#	is_triggered_only = yes
#	immediate = {
#		every_state = {
#			limit = {
#				is_demilitarized_zone = yes
#				has_state_flag = DMZ_state_flag@ROOT
#			}
#			set_demilitarized_zone = no
#			clr_state_flag = DMZ_state_flag@ROOT
#		}
#		set_country_flag = DMZ_you_shall_stop_now_flag
#	}
#	option = {
#	}
#}
# SOV Support PRC if they win NXM
country_event = {
	id = EFM_Comchina.14
	title = EFM_Comchina.14.t
	desc = EFM_Comchina.14.d
	picture = GFX_report_event_british_artillery
	trigger = {
		country_exists = SOV
		SOV = {
			is_puppet = no
			has_government = communism
		}
		has_government = communism
		tag = PRC
		PRC = {
			exists = yes
			is_subject = no
			has_country_flag = PRC_west_expedition_victory
			OR = {
				AND = {
					SIK = {
						NOT = { has_war_with = PRC }
						is_neighbor_of = PRC
					}
				}
				is_neighbor_of = SOV
				is_neighbor_of = MON
			}
			NOT = {
				has_war_with = SOV
				has_government = fascism
			}
		}
	}
	mean_time_to_happen = {
		days = 50
	}
	fire_only_once = yes
	option = {
		name = EFM_Comchina.14.a
		add_equipment_to_stockpile = { type = infantry_equipment_1 amount = 1000 producer = SOV }
		add_equipment_to_stockpile = { type = artillery_equipment_1 amount = 100 producer = SOV }
	}
}
# [global.GetCPC] Request us join them faction
country_event = {
	id = EFM_Comchina.15
	title = EFM_Comchina.15.t
	desc = EFM_Comchina.15.d
	picture = GFX_report_event_chinese_officers

	is_triggered_only = yes
	option = {
		ai_chance = {
			factor = 70
			modifier = {
				factor = 30
				strength_ratio = {
					tag = FROM
					ratio > 0.75
				}
			}
		}
		name = EFM_Comchina.15.a
		FROM = {
			country_event = {
				days = 1
				id = EFM_Comchina.16
			}
		}
	}
	option = {
		ai_chance = {
			factor = 30
			modifier = {
				factor = 70
				strength_ratio = {
					tag = FROM
					ratio > 0.75
				}
			}
		}
		name = EFM_Comchina.15.b
		FROM = {
			country_event = {
				days = 1
				id = EFM_Comchina.17
			}
		}
	}
}
country_event = {
	id = EFM_Comchina.16
	title = EFM_Comchina.16.t
	desc = EFM_Comchina.16.d
	picture = GFX_report_event_chinese_soldiers_02

	is_triggered_only = yes
	option = {
		ai_chance = { factor = 70 }
		name = EFM_Comchina.16.a
		create_wargoal = { type = annex_everything target = FROM }
	}
	option = {
		ai_chance = { factor = 30 }
		name = EFM_Comchina.16.b
	}
}
country_event = {
	id = EFM_Comchina.17
	title = EFM_Comchina.17.t
	desc = EFM_Comchina.17.d
	picture = GFX_report_event_chinese_soldiers

	is_triggered_only = yes
	option = {
		name = EFM_Comchina.17.a
		ROOT = { set_autonomy = { target = FROM autonomy_state = autonomy_integrated_puppet } }
	}
}

################
################
# Soviet Region
#custom_effect_tooltip = separate_line_tt
#custom_effect_tooltip = this_may_lead_to
#custom_effect_tooltip = alienatining_Moscow_tt
#custom_effect_tooltip = PRC_estrangement_moscow
#custom_effect_tooltip = leaning_towards_Moscow_tt
#custom_effect_tooltip = PRC_Leaning_to_moscow
#custom_effect_tooltip = revisiting_troskyism_tt
#custom_effect_tooltip = PRC_Route_of_founding_member
#custom_effect_tooltip = maintaining_the_status_quo_tt
#custom_effect_tooltip = PRC_Maintain_the_status
#
country_event = {
	id = EFM_Comchina.20
	title = EFM_Comchina.20.t
	desc = EFM_Comchina.20.d
	picture = GFX_report_event_generic_communist_congress

	fire_only_once = yes
	is_triggered_only = yes
	trigger = {
		tag = PRC
		NOT = {
			has_completed_focus = PRC_End_of_Long_March
		}
	}
	option = {
		ai_chance = {
			factor = 50
			modifier = {
				factor = 100
				is_historical_focus_on = yes
			}
		}
		name = EFM_Comchina.20.a
		custom_effect_tooltip = THIS_IS_HISTORICAL_TT
		set_country_flag = PRC_Maintain_the_status
		custom_effect_tooltip = we_will_be_maintaining_the_status_quo_tt
	}
	option = {
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
		name = EFM_Comchina.20.b
		country_event = { id = EFM_Comchina.21 }
		custom_effect_tooltip = separate_line_tt
		custom_effect_tooltip = this_may_lead_to
		custom_effect_tooltip = alienatining_Moscow_tt
		custom_effect_tooltip = leaning_towards_Moscow_tt
		custom_effect_tooltip = revisiting_troskyism_tt
		#custom_effect_tooltip = maintaining_the_status_quo_tt
		custom_effect_tooltip = PRC_Maintain_the_status
	}
}
country_event = { #like or hate sov
	id = EFM_Comchina.21
	title = EFM_Comchina.21.t
	desc = EFM_Comchina.21.d
	picture = GFX_report_event_generic_communist_congress

	is_triggered_only = yes
	option = {#like
		ai_chance = {
			factor = 50
			modifier = {
				factor = 30
				is_historical_focus_on = yes
			}
		}
		name = EFM_Comchina.21.a
		random_list = {
			60 = {
				country_event = { id = EFM_Comchina.22 days = 2 }
			}
			40 = {
				country_event = { id = EFM_Comchina.23 days = 2 }
			}
		}
		custom_effect_tooltip = separate_line_tt
		custom_effect_tooltip = this_may_lead_to
		custom_effect_tooltip = leaning_towards_Moscow_tt
		custom_effect_tooltip = PRC_Maintain_the_status
		custom_effect_tooltip = PRC_estrangement_moscow
		custom_effect_tooltip = PRC_Route_of_founding_member
	}

	option = {#hate
		ai_chance = {
			factor = 50
			modifier = {
				factor = 70
				is_historical_focus_on = yes
			}
		}
		name = EFM_Comchina.21.b
		random_list = {
			40 = {
				country_event = { id =  EFM_Comchina_extra.2 days = 2 }
			}
			60 = {
				country_event = { id =  EFM_Comchina_extra.1 days = 2 }
			}
		}
		custom_effect_tooltip = separate_line_tt
		custom_effect_tooltip = this_may_lead_to
		custom_effect_tooltip = alienatining_Moscow_tt
		custom_effect_tooltip = revisiting_troskyism_tt
		custom_effect_tooltip = PRC_Maintain_the_status
		custom_effect_tooltip = PRC_Leaning_to_moscow
	}
}
country_event = { #Public accept us
	id = EFM_Comchina.22
	title = EFM_Comchina.22.t
	desc = EFM_Comchina.22.d
	picture = GFX_report_event_hitler_handshake

	is_triggered_only = yes
	option = {
		name = EFM_Comchina.22.a
		set_country_flag = PRC_Leaning_to_moscow
		custom_effect_tooltip = we_will_be_leaning_towards_Moscow_tt
		add_political_power = 50
	}
}
country_event = { #People question us that we like sov, convince them or agree
	id = EFM_Comchina.23
	title = EFM_Comchina.23.t
	desc = EFM_Comchina.23.d
	picture = GFX_report_event_generic_communist_congress

	is_triggered_only = yes
	option = {
		ai_chance = {#convince
			factor = 50
			modifier = {
				factor = 70
				is_historical_focus_on = yes
			}
		}
		name = EFM_Comchina.23.a
		random_list = {
			70 = { country_event = { id = EFM_Comchina.24 days = 2 } }
			30 = { country_event = { id = EFM_Comchina.22 days = 2 } }
		}
		custom_effect_tooltip = separate_line_tt
		custom_effect_tooltip = this_may_lead_to
		#custom_effect_tooltip = alienatining_Moscow_tt
		#custom_effect_tooltip = PRC_estrangement_moscow
		custom_effect_tooltip = leaning_towards_Moscow_tt
		#custom_effect_tooltip = PRC_Leaning_to_moscow
		#custom_effect_tooltip = revisiting_troskyism_tt
		#custom_effect_tooltip = PRC_Route_of_founding_member
		#custom_effect_tooltip = maintaining_the_status_quo_tt
		#custom_effect_tooltip = PRC_Maintain_the_status
	}
	option = {#we will be maintaining status quo instead
		ai_chance = {
			factor = 20
			modifier = {
				factor = 15
				is_historical_focus_on = yes
			}
		}
		name = EFM_Comchina.23.b
		set_country_flag = PRC_Maintain_the_status
		custom_effect_tooltip = we_will_be_maintaining_the_status_quo_tt
	}
	option = {#agree
		ai_chance = {
			factor = 5
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
		name = EFM_Comchina.23.c
		set_country_flag = PRC_estrangement_moscow
		custom_effect_tooltip = we_will_be_alienatining_Moscow_tt
		country_event = { id = EFM_Comchina.25 days = 2 }
		custom_effect_tooltip = separate_line_tt
		custom_effect_tooltip = this_may_lead_to
		#custom_effect_tooltip = alienatining_Moscow_tt
		#custom_effect_tooltip = PRC_estrangement_moscow
		#custom_effect_tooltip = leaning_towards_Moscow_tt
		#custom_effect_tooltip = PRC_Leaning_to_moscow
		custom_effect_tooltip = revisiting_troskyism_tt
		#custom_effect_tooltip = PRC_Route_of_founding_member
		#custom_effect_tooltip = maintaining_the_status_quo_tt
		custom_effect_tooltip = PRC_Maintain_the_status
	}
}
country_event = { #Public barely accept us
	id = EFM_Comchina.24
	title = EFM_Comchina.24.t
	desc = EFM_Comchina.24.d
	picture = GFX_report_event_generic_communist_congress

	is_triggered_only = yes
	option = {
		name = EFM_Comchina.24.a
		set_country_flag = PRC_Leaning_to_moscow
		custom_effect_tooltip = we_will_be_leaning_towards_Moscow_tt
		add_timed_idea = { idea = PRC_Dissatisfied days = 180 }
		add_political_power = -50
	}
}
country_event = { #respect or not respect troskyists
	id = EFM_Comchina.25
	title = EFM_Comchina.25.t
	desc = EFM_Comchina.25.d
	picture = GFX_report_event_generic_communist_congress

	is_triggered_only = yes
	option = {#respect
		ai_chance = {
			factor = 50
			modifier = {
				factor = 30
				is_historical_focus_on = yes
			}
		}
		name = EFM_Comchina.25.a
		country_event = { id = EFM_Comchina.26 days = 2 }
		custom_effect_tooltip = separate_line_tt
		custom_effect_tooltip = this_may_lead_to
		#custom_effect_tooltip = alienatining_Moscow_tt
		#custom_effect_tooltip = PRC_estrangement_moscow
		#custom_effect_tooltip = leaning_towards_Moscow_tt
		#custom_effect_tooltip = PRC_Leaning_to_moscow
		custom_effect_tooltip = revisiting_troskyism_tt
		#custom_effect_tooltip = PRC_Route_of_founding_member
		#custom_effect_tooltip = maintaining_the_status_quo_tt
		custom_effect_tooltip = PRC_Maintain_the_status
	}

	option = {#NOT
		ai_chance = {
			factor = 50
			modifier = {
				factor = 70
				is_historical_focus_on = yes
			}
		}
		name = EFM_Comchina.25.b
		set_country_flag = PRC_Maintain_the_status
		custom_effect_tooltip = we_will_be_maintaining_the_status_quo_tt
	}
}
country_event = { #troskyists try to convince us, agree or not
	id = EFM_Comchina.26
	title = EFM_Comchina.26.t
	desc = EFM_Comchina.26.d
	picture = GFX_report_event_generic_communist_congress

	is_triggered_only = yes
	option = { #agree
		ai_chance = {
			factor = 50
			modifier = {
				factor = 30
				is_historical_focus_on = yes
			}
		}
		name = EFM_Comchina.26.a
		random_list = {
			60 = { country_event = { id = EFM_Comchina.27 days = 2 } }
			40 = { country_event = { id = EFM_Comchina.28 days = 2 } }
		}
		custom_effect_tooltip = separate_line_tt
		custom_effect_tooltip = this_may_lead_to
		#custom_effect_tooltip = alienatining_Moscow_tt
		#custom_effect_tooltip = PRC_estrangement_moscow
		#custom_effect_tooltip = leaning_towards_Moscow_tt
		#custom_effect_tooltip = PRC_Leaning_to_moscow
		custom_effect_tooltip = revisiting_troskyism_tt
		#custom_effect_tooltip = PRC_Route_of_founding_member
		#custom_effect_tooltip = maintaining_the_status_quo_tt
		custom_effect_tooltip = PRC_Maintain_the_status
	}
	option = { #no
		ai_chance = {
			factor = 50
			modifier = {
				factor = 70
				is_historical_focus_on = yes
			}
		}
		name = EFM_Comchina.26.b
		country_event = { id = EFM_Comchina.29 days = 2 }

		custom_effect_tooltip = separate_line_tt
		custom_effect_tooltip = this_may_lead_to
		#custom_effect_tooltip = alienatining_Moscow_tt
		#custom_effect_tooltip = PRC_estrangement_moscow
		#custom_effect_tooltip = leaning_towards_Moscow_tt
		#custom_effect_tooltip = PRC_Leaning_to_moscow
		#custom_effect_tooltip = revisiting_troskyism_tt
		#custom_effect_tooltip = PRC_Route_of_founding_member
		custom_effect_tooltip = maintaining_the_status_quo_tt
		#custom_effect_tooltip = PRC_Maintain_the_status
	}
}
country_event = { #Trotskyism Revisited
	id = EFM_Comchina.27
	title = EFM_Comchina.27.t
	desc = EFM_Comchina.27.d
	picture = GFX_report_event_hitler_handshake

	is_triggered_only = yes
	option = {
		name = EFM_Comchina.27.a
		set_country_flag = PRC_Route_of_founding_member
		custom_effect_tooltip = we_will_be_revisiting_troskyism_tt
		add_political_power = 50
		add_timed_idea = { idea = PRC_Dissatisfied days = 180 }
	}
}
country_event = { #People hate troskyists
	id = EFM_Comchina.28
	title = EFM_Comchina.28.t
	desc = EFM_Comchina.28.d
	picture = GFX_report_event_generic_communist_congress

	is_triggered_only = yes
	option = {
		name = EFM_Comchina.28.a
		set_country_flag = PRC_Maintain_the_status
		custom_effect_tooltip = we_will_be_maintaining_the_status_quo_tt
		add_political_power = -50
	}
	option = {
		name = EFM_Comchina.28.b
		set_country_flag = PRC_Route_of_founding_member
		custom_effect_tooltip = we_will_be_revisiting_troskyism_tt
		add_stability = -0.05
		add_war_support = -0.05
		add_political_power = -75
	}
}
country_event = { #Trotskyists Express Dissatisfaction, expel them or ignore
	id = EFM_Comchina.29
	title = EFM_Comchina.29.t
	desc = EFM_Comchina.29.d
	picture = GFX_report_event_generic_communist_congress

	is_triggered_only = yes
	option = {
		ai_chance = {
			factor = 50
			modifier = {
				factor = 70
				is_historical_focus_on = yes
			}
		}
		name = EFM_Comchina.29.a
		add_political_power = -75
		set_country_flag = PRC_Maintain_the_status
		custom_effect_tooltip = we_will_be_maintaining_the_status_quo_tt
	}
	option = {
		ai_chance = {
			factor = 50
			modifier = {
				factor = 30
				is_historical_focus_on = yes
			}
		}
		name = EFM_Comchina.29.b
		random_list = {
			60 = { country_event = { id = EFM_Comchina.30 days = 2 } }
			40 = { country_event = { id = EFM_Comchina.31 days = 2 } }
		}
		custom_effect_tooltip = separate_line_tt
		custom_effect_tooltip = this_may_lead_to
		#custom_effect_tooltip = alienatining_Moscow_tt
		#custom_effect_tooltip = PRC_estrangement_moscow
		#custom_effect_tooltip = leaning_towards_Moscow_tt
		#custom_effect_tooltip = PRC_Leaning_to_moscow
		#custom_effect_tooltip = revisiting_troskyism_tt
		#custom_effect_tooltip = PRC_Route_of_founding_member
		custom_effect_tooltip = maintaining_the_status_quo_tt
		#custom_effect_tooltip = PRC_Maintain_the_status
	}
}
country_event = { #Clash within CCP
	id = EFM_Comchina.30
	title = EFM_Comchina.30.t
	desc = EFM_Comchina.30.d
	picture = GFX_report_event_generic_riot

	is_triggered_only = yes
	option = {
		name = EFM_Comchina.30.a
		set_country_flag = PRC_Maintain_the_status
		custom_effect_tooltip = we_will_be_maintaining_the_status_quo_tt
		add_political_power = -75
		add_timed_idea = { idea = PRC_Dissatisfied days = 180 }
	}
}
country_event = { #Trotskyists go their own way
	id = EFM_Comchina.31
	title = EFM_Comchina.31.t
	desc = EFM_Comchina.31.d
	picture = GFX_report_event_generic_ruins

	is_triggered_only = yes
	option = {
		name = EFM_Comchina.31.a
		set_country_flag = PRC_Maintain_the_status
		custom_effect_tooltip = we_will_be_maintaining_the_status_quo_tt
		add_political_power = -25
		set_party_name = {
			ideology = n_socialism
			long_name = PRC_Chinese_communist_league
			name = PRC_Chinese_communist_league
		}
		add_popularity = {
			ideology = n_socialism
			popularity = 0.1
		}
	}
}
add_namespace = EFM_Comchina_extra
country_event = { #People question disliking sov, convince or agree
	id = EFM_Comchina_extra.1
	title = EFM_Comchina_extra.1.t
	desc = EFM_Comchina_extra.1.d
	picture = GFX_report_event_generic_ruins

	is_triggered_only = yes
	option = {
		ai_chance = {#convince
			factor = 50
			modifier = {
				factor = 30
				is_historical_focus_on = yes
			}
		}
		name = EFM_Comchina_extra.1.a
		random_list = {
			70 = { country_event = { id = EFM_Comchina_extra.2 days = 2 } }
			30 = { country_event = { id = EFM_Comchina_extra.3 days = 2 } }
		}
		custom_effect_tooltip = separate_line_tt
		custom_effect_tooltip = this_may_lead_to
		custom_effect_tooltip = alienatining_Moscow_tt
		#custom_effect_tooltip = PRC_estrangement_moscow
		#custom_effect_tooltip = leaning_towards_Moscow_tt
		#custom_effect_tooltip = PRC_Leaning_to_moscow
		custom_effect_tooltip = revisiting_troskyism_tt
		#custom_effect_tooltip = PRC_Route_of_founding_member
		#custom_effect_tooltip = maintaining_the_status_quo_tt
		custom_effect_tooltip = PRC_Maintain_the_status

	}
	option = {#agree
		ai_chance = {
			factor = 50
			modifier = {
				factor = 50
				is_historical_focus_on = yes
			}
		}
		name = EFM_Comchina_extra.1.b
		set_country_flag = PRC_Maintain_the_status
		custom_effect_tooltip = we_will_be_maintaining_the_status_quo_tt
	}
	option = {#agree
		ai_chance = {
			factor = 50
			modifier = {
				factor = 70
				is_historical_focus_on = yes
			}
		}
		name = EFM_Comchina_extra.1.c
		set_country_flag = PRC_Leaning_to_moscow
		custom_effect_tooltip = we_will_be_leaning_towards_Moscow_tt
	}
}
country_event = { #Public accept us
	id = EFM_Comchina_extra.2
	title = EFM_Comchina_extra.2.t
	desc = EFM_Comchina_extra.2.d
	picture = GFX_report_event_hitler_handshake

	is_triggered_only = yes
	option = {
		name = EFM_Comchina_extra.2.a
		set_country_flag = PRC_estrangement_moscow
		custom_effect_tooltip = we_will_be_alienatining_Moscow_tt
		country_event = { id = EFM_Comchina.25 days = 2 }
		add_political_power = 50
		custom_effect_tooltip = separate_line_tt
		custom_effect_tooltip = this_may_lead_to
		#custom_effect_tooltip = alienatining_Moscow_tt
		#custom_effect_tooltip = PRC_estrangement_moscow
		#custom_effect_tooltip = leaning_towards_Moscow_tt
		#custom_effect_tooltip = PRC_Leaning_to_moscow
		custom_effect_tooltip = revisiting_troskyism_tt
		#custom_effect_tooltip = PRC_Route_of_founding_member
		#custom_effect_tooltip = maintaining_the_status_quo_tt
		custom_effect_tooltip = PRC_Maintain_the_status
	}
}
country_event = { #Public barely accept us
	id = EFM_Comchina_extra.3
	title = EFM_Comchina_extra.3.t
	desc = EFM_Comchina_extra.3.d
	picture = GFX_report_event_generic_communist_congress

	is_triggered_only = yes
	option = {
		name = EFM_Comchina_extra.3.a
		set_country_flag = PRC_estrangement_moscow
		custom_effect_tooltip = we_will_be_alienatining_Moscow_tt
		country_event = { id = EFM_Comchina.25 days = 2 }
		add_timed_idea = { idea = PRC_Dissatisfied days = 180 }
		add_political_power = -50
		custom_effect_tooltip = separate_line_tt
		custom_effect_tooltip = this_may_lead_to
		#custom_effect_tooltip = alienatining_Moscow_tt
		#custom_effect_tooltip = PRC_estrangement_moscow
		#custom_effect_tooltip = leaning_towards_Moscow_tt
		#custom_effect_tooltip = PRC_Leaning_to_moscow
		custom_effect_tooltip = revisiting_troskyism_tt
		#custom_effect_tooltip = PRC_Route_of_founding_member
		#custom_effect_tooltip = maintaining_the_status_quo_tt
		custom_effect_tooltip = PRC_Maintain_the_status
	}
}
####END OF SOVIET Regions
###########################



# Chen Duxiu released from prison
country_event = {
	id = EFM_Comchina.32
	title = EFM_Comchina.32.t
	desc = EFM_Comchina.32.d
	picture = GFX_report_event_generic_rally2

	fire_only_once = yes
	trigger = {
		always = no #obsolete
		tag = PRC
		date > 1937.8.23
		#has_country_flag = PRC_Route_of_founding_member
		#has_completed_focus = PRC_Trotskyism_faction
	}
	option = {
		ai_chance = { factor = 60 }
		name = EFM_Comchina.32.a
		random_list = {
			80 = { country_event = { id = EFM_Comchina.33 days = 1 } }
			20 = { country_event = { id = EFM_Comchina.34 days = 1 } }
		}
	}
	option = {
		ai_chance = { factor = 40 }
		name = EFM_Comchina.32.b
	}
}
country_event = {
	id = EFM_Comchina.33
	title = EFM_Comchina.33.t
	desc = EFM_Comchina.33.d
	picture = GFX_report_event_hitler_handshake

	is_triggered_only = yes
	option = {
		name = EFM_Comchina.33.a
		add_political_power = 25
		set_country_flag = Chen_duxiu_comeback
	}
}
country_event = {
	id = EFM_Comchina.34
	title = EFM_Comchina.34.t
	desc = EFM_Comchina.34.d
	picture = GFX_report_event_generic_rally2

	is_triggered_only = yes
	option = {
		name = EFM_Comchina.34.a
		add_political_power = -25
	}
}
country_event = { #obsolete NOT important
	id = EFM_Comchina.35
	title = EFM_Comchina.35.t
	desc = EFM_Comchina.35.d
	picture = GFX_report_event_generic_rally2

	fire_only_once = yes
	trigger = {
		tag = PRC
		has_country_flag = Chen_duxiu_comeback
		NOT = {
			has_country_leader = {
				character = prc_chen_duxiu
			}
		}
	}
	option = {
		name = EFM_Comchina.35.a
		retire_country_leader = yes
		prc_chen_duxiu = {
			add_country_leader_role = {
				country_leader = {
					expire = "1965.1.1"
					ideology = trotskyism
					traits = {
					}
				}
				promote_leader = yes
			}   
		} 
        add_country_leader_trait = {
			ideology = trotskyism
			trait = permanent_revolutionary
		}
		#create_country_leader = {
		#	name = "Chen Duxiu"
		#	desc = "POLITICS_CHEN_DUXIU_DESC"
		#	picture = "Portrait_China_Chen_Duxiu.dds"
		#	expire = "1965.1.1"
		#	ideology = trotskyism
		#	traits = { permanent_revolutionary }
		#}
	}
}
# Domestic truce agreement
country_event = {
	id = EFM_Comchina.36
	title = EFM_Comchina.36.t
	desc = EFM_Comchina.36.d
	picture = GFX_report_event_generic_read_write

	is_triggered_only = yes
	option = {
		ai_chance = {
			factor = 50
			modifier = {
				factor = 70
				strength_ratio = {
					tag = FROM
					ratio > 0.8
				}
				NOT = { has_government = communism }
			}
			modifier = {
				factor = 10
				strength_ratio = {
					tag = FROM
					ratio < 0.5
				}
				NOT = { has_government = communism }
			}
			modifier = {
				factor = 90
				has_government = communism
			}
		}
		name = EFM_Comchina.36.a
		effect_tooltip = {
			FROM = {
				puppet = ROOT
			}
		}
		FROM = { country_event = { id = EFM_Comchina.37 days = 1 } }
		add_opinion_modifier = {
			target = FROM
			modifier = Nations_friendly
		}
		add_ai_strategy = {
			type = befriend
			id = "PRC"
			value = 100
		}
	}
	option = {
		ai_chance = {
			factor = 50
			modifier = {
				factor = 30
				strength_ratio = {
					tag = FROM
					ratio > 0.8
				}
				NOT = { has_government = communism }
			}
			modifier = {
				factor = 90
				strength_ratio = {
					tag = FROM
					ratio < 0.5
				}
				NOT = { has_government = communism }
			}
			modifier = {
				factor = 10
				has_government = communism
			}
		}
		name = EFM_Comchina.36.b
		FROM = { country_event = { id = EFM_Comchina.38 days = 1 } }
		add_opinion_modifier = {
			target = FROM
			modifier = hostile_status
		}
		set_country_flag = PRC_Refuse_truce_agreement_and_unity_front
	}
}
country_event = {
	id = EFM_Comchina.37
	title = EFM_Comchina.37.t
	desc = EFM_Comchina.37.d
	picture = GFX_report_event_hitler_handshake

	is_triggered_only = yes
	option = {
		name = EFM_Comchina.37.a
		add_political_power = 25
		FROM = {
			get_current_government_type = yes
		}
		puppet = FROM
		FROM = {
			restore_previous_government_type = yes
		}
		add_opinion_modifier = {
			target = FROM
			modifier = Nations_friendly
		}
	}
}
country_event = {
	id = EFM_Comchina.38
	title = EFM_Comchina.38.t
	desc = EFM_Comchina.38.d
	picture = GFX_report_event_chinese_soldiers_02

	is_triggered_only = yes
	option = {
		name = EFM_Comchina.38.a
		add_opinion_modifier = {
			target = FROM
			modifier = hostile_status
		}
	}
}
# Domestic revolution of china
country_event = {
	id = EFM_Comchina.39
	title = EFM_Comchina.39.t
	desc = EFM_Comchina.39.d
	picture = GFX_report_event_chinese_soldiers_02

	is_triggered_only = yes
	option = {
		name = EFM_Comchina.39.a
		add_ideas = communist_influence
		set_country_flag = PRC_Support_us_revolution_and_puppet
	}
}
country_event = {
	id = EFM_Comchina.40
	title = EFM_Comchina.40.t
	desc = EFM_Comchina.40.d
	picture = GFX_report_event_generic_riot
	trigger = {
		OR = {
			AND = {
				has_country_flag = PRC_Support_us_revolution_and_puppet
				is_puppet = no
				communism > 0.5
			}
			AND = {
				has_country_flag = PRC_Support_us_revolution_and_puppet
				is_puppet = yes
				communism > 0.75
			}
		}
	}
	mean_time_to_happen = {
		days = 2
	}
	option = {
		name = EFM_Comchina.40.a
		event_target:WTT_communist_china = { country_event = { id = EFM_Comchina.41 days = 1 } }
	}
}
country_event = {
	id = EFM_Comchina.41
	title = EFM_Comchina.41.t
	desc = EFM_Comchina.41.d
	picture = GFX_report_event_generic_riot
	is_triggered_only = yes
	option = {
		name = EFM_Comchina.41.a
		trigger = {
			FROM = {
				has_country_flag = submit_oof
			}
		}
		ROOT = { set_autonomy = { target = FROM autonomy_state = autonomy_integrated_puppet } }
	}
}
# Pan national unity front
country_event = {
	id = EFM_Comchina.42
	title = EFM_Comchina.42.t
	desc = EFM_Comchina.42.d
	picture = GFX_report_event_chinese_army_training
	is_triggered_only = yes
	option = {
		ai_chance = {
			factor = 50
			modifier = {
				factor = 70
				strength_ratio = {
					tag = FROM
					ratio > 0.8
				}
				NOT = { has_government = communism }
			}
			modifier = {
				factor = 10
				strength_ratio = {
					tag = FROM
					ratio < 0.5
				}
				NOT = { has_government = communism }
			}
			modifier = {
				factor = 90
				has_government = communism
			}
		}
		name = EFM_Comchina.36.a
		FROM = { country_event = { id = EFM_Comchina.43 days = 1 } }
		add_opinion_modifier = {
			target = FROM
			modifier = Nations_friendly
		}
		add_ai_strategy = {
			type = befriend
			id = "PRC"
			value = 200
		}
		add_ai_strategy = {
			type = alliance
			id = "PRC"
			value = 200
		}
	}
	option = {
		ai_chance = {
			factor = 50
			modifier = {
				factor = 30
				strength_ratio = {
					tag = FROM
					ratio > 0.8
				}
				NOT = { has_government = communism }
			}
			modifier = {
				factor = 90
				strength_ratio = {
					tag = FROM
					ratio < 0.5
				}
				NOT = { has_government = communism }
			}
			modifier = {
				factor = 10
				has_government = communism
			}
		}
		name = EFM_Comchina.36.b
	}
}
country_event = {
	id = EFM_Comchina.43
	title = EFM_Comchina.43.t
	desc = EFM_Comchina.43.d
	picture = GFX_report_event_chinese_japanese_handshake
	is_triggered_only = yes
	option = {
		name = EFM_Comchina.43.a
		ROOT = { add_to_faction = FROM }
		add_opinion_modifier = {
			target = FROM
			modifier = Nations_friendly
		}
	}
}
# Disrupt enemy
country_event = {
	id = EFM_Comchina.44
	title = EFM_Comchina.44.t
	desc = EFM_Comchina.44.d
	picture = GFX_report_event_generic_riot
	trigger = {
		has_idea = CHI_communist_uprisings
		has_country_flag = PRC_Disrupt_enemy_to_enemy
		PRC = {
			exists = yes
			is_subject = no
			has_government = communism
		}
		NOT = {
			has_government = communism
			has_idea = PRC_Protest_3
		}
	}
	mean_time_to_happen = {
		days = 120
	}
	option = {
		ai_chance = { factor = 90 }
		name = EFM_Comchina.44.a
		add_political_power = -100
	}
	option = {
		ai_chance = { factor = 10 }
		name = EFM_Comchina.44.b
		add_timed_idea = { idea = PRC_Protest_3 days = 90 }
	}
}
country_event = {
	id = EFM_Comchina.45
	title = EFM_Comchina.45.t
	desc = EFM_Comchina.45.d
	picture = GFX_report_event_generic_riot
	trigger = {
		has_idea = CHI_communist_uprisings
		has_country_flag = PRC_Disrupt_enemy_to_enemy
		PRC = {
			exists = yes
			is_subject = no
			has_government = communism
		}
		NOT = {
			has_government = communism
			has_idea = PRC_Protest
			has_idea = PRC_Protest_2
		}
	}
	mean_time_to_happen = {
		days = 150
	}
	option = {
		ai_chance = { factor = 70 }
		name = EFM_Comchina.45.a
		add_timed_idea = { idea = PRC_Protest days = 90 }
	}
	option = {
		ai_chance = { factor = 30 }
		name = EFM_Comchina.45.b
		add_political_power = -150
		add_timed_idea = { idea = PRC_Protest_2 days = 90 }
	}
}
# Nationwide revolution(Hunan)
country_event = {
	id = EFM_Comchina.46
	title = EFM_Comchina.46.t
	desc = EFM_Comchina.46.d
	picture = GFX_report_event_chinese_japanese_handshake
	is_triggered_only = yes
	option = {
		name = EFM_Comchina.46.a
		if = {
			limit = {
				750 = {
					is_owned_by = ROOT
				}
			}	
			FROM = { 
				transfer_state = 750
			}
		}
		if = {
			limit = {
				1035 = {
					is_owned_by = ROOT
				}
			}	
			FROM = { 
				transfer_state = 1035
			}
		}
		if = {
			limit = {
				602 = {
					is_owned_by = ROOT
				}
			}	
			FROM = { 
				transfer_state = 602
			}
		}
		if = {
			limit = {
				has_character = CHI_cheng_qian
			}
			retire_character = CHI_cheng_qian
		}
		if = {
			limit = {
				tag = event_target:WTT_current_china_leader
			}
		    transfer_units_fraction = {
				target = event_target:WTT_communist_china          # the recipient
				size = 0       # [0,1] Default value for the ratio below if they are not specified
				army_ratio = 0.05       # [0,1] Overrides size modifier for army
				stockpile_ratio = 0.05  # [0,1] Overrides size modifier for the stockpiled equipment and fuel
				#navy_ratio = 0.2       # [0,1] Overrides size modifier for navy
				#air_ratio = 0.4        # [0,1] Overrides size modifier for air
				keep_unit_leaders_trigger = { # Trigger for unit leaders to remain with the original country
					always = yes
				}
			}
		}
		add_popularity = {
			ideology = communism
			popularity = -0.1
		}
		if = {
			limit = {
				tag = event_target:WTT_current_china_leader
			}
			event_target:WTT_communist_china = { country_event = { id = EFM_Comchina.47 days = 0 } }
		}
		
		event_target:WTT_current_china_leader = { #guo
		every_controlled_state = {
		limit = { is_fully_controlled_by = event_target:WTT_current_china_leader }
			teleport_armies = {
				to_state = 1005
				limit = {
					tag = event_target:WTT_communist_china
					# trigger will be checked for owner of armies and will only teleport if true. scope if the owner of the army and prev is the scope that calls teleport_armies
				}
			}
		}
		}
	}
}
country_event = {
	id = EFM_Comchina.47
	title = EFM_Comchina.47.t
	desc = EFM_Comchina.47.d
	picture = GFX_report_event_chinese_japanese_handshake
	is_triggered_only = yes
	option = {
		name = EFM_Comchina.47.a
		effect_tooltip = {
			if = {
				limit = {
					750 = {
						is_owned_by = FROM
					}
				}	
				transfer_state = 750
			}
			if = {
				limit = {
					1035 = {
						is_owned_by = FROM
					}
				}	
				transfer_state = 1035
			}
			if = {
				limit = {
					602 = {
						is_owned_by = FROM
					}
				}	
				transfer_state = 602
			}
			FROM = {
				if = {
					limit = {
						has_character = CHI_cheng_qian
					}
					retire_character = CHI_cheng_qian
				}
				if = {
					limit = {
						tag = event_target:WTT_current_china_leader
					}
					transfer_units_fraction = {
						target = ROOT          # the recipient
						size = 0       # [0,1] Default value for the ratio below if they are not specified
						army_ratio = 0.05       # [0,1] Overrides size modifier for army
						stockpile_ratio = 0.05  # [0,1] Overrides size modifier for the stockpiled equipment and fuel
						#navy_ratio = 0.2       # [0,1] Overrides size modifier for navy
						#air_ratio = 0.4        # [0,1] Overrides size modifier for air
						keep_unit_leaders_trigger = { # Trigger for unit leaders to remain with the original country
							always = yes
						}
					}
				}
			}
		}
	}
}

# Nationwide revolution(Kweichow)
country_event = {
	id = EFM_Comchina.48
	title = EFM_Comchina.48.t
	desc = EFM_Comchina.48.d
	picture = GFX_report_event_chinese_japanese_handshake
	is_triggered_only = yes
	option = {
		name = EFM_Comchina.48.a
		if = {
			limit = {
				748 = {
					is_owned_by = ROOT
				}
			}	
			FROM = { 
				transfer_state = 748
			}
		}
		if = {
			limit = {
				603 = {
					is_owned_by = ROOT
				}
			}	
			FROM = { 
				transfer_state = 603
			}
		}
		transfer_units_fraction = {
			target = event_target:WTT_communist_china          # the recipient
			size = 0       # [0,1] Default value for the ratio below if they are not specified
			army_ratio = 0.05       # [0,1] Overrides size modifier for army
			stockpile_ratio = 0.05  # [0,1] Overrides size modifier for the stockpiled equipment and fuel
			#navy_ratio = 0.2       # [0,1] Overrides size modifier for navy
			#air_ratio = 0.4        # [0,1] Overrides size modifier for air
			keep_unit_leaders_trigger = { # Trigger for unit leaders to remain with the original country
				always = yes
			}
		}
		add_popularity = {
			ideology = communism
			popularity = -0.05
		}
		event_target:WTT_communist_china = { country_event = { id = EFM_Comchina.49 days = 0 } }
		
		event_target:WTT_current_china_leader = { #guo
		every_controlled_state = {
			teleport_armies = {
				to_state = 1005
				limit = {
					tag = FROM
					# trigger will be checked for owner of armies and will only teleport if true. scope if the owner of the army and prev is the scope that calls teleport_armies
				}
			}
		}
		}
	}
}
country_event = {
	id = EFM_Comchina.49
	title = EFM_Comchina.49.t
	desc = EFM_Comchina.49.d
	picture = GFX_report_event_chinese_japanese_handshake
	is_triggered_only = yes
	option = {
		name = EFM_Comchina.49.a
		effect_tooltip = {
			if = {
				limit = {
					748 = {
						is_owned_by = FROM
					}
				}	
				transfer_state = 748
			}
			if = {
				limit = {
					603 = {
						is_owned_by = FROM
					}
				}	
				transfer_state = 603
			}
			FROM = {
				transfer_units_fraction = {
					target = ROOT          # the recipient
					size = 0       # [0,1] Default value for the ratio below if they are not specified
					army_ratio = 0.05       # [0,1] Overrides size modifier for army
					stockpile_ratio = 0.05  # [0,1] Overrides size modifier for the stockpiled equipment and fuel
					#navy_ratio = 0.2       # [0,1] Overrides size modifier for navy
					#air_ratio = 0.4        # [0,1] Overrides size modifier for air
					keep_unit_leaders_trigger = { # Trigger for unit leaders to remain with the original country
						always = yes
					}
				}
			}
		}
	}
}

# Nationwide revolution(NXM)
country_event = {
	id = EFM_Comchina.50
	title = EFM_Comchina.50.t
	desc = EFM_Comchina.50.d
	picture = GFX_report_event_ningsia_campaign
	is_triggered_only = yes
	option = {
		name = EFM_Comchina.50.a
		custom_effect_tooltip = THIS_IS_HISTORICAL_TT
		ai_chance = { factor = 70 }
		event_target:WTT_communist_china = { country_event = { id = EFM_Comchina.51 days = 0 } }
		event_target:WTT_current_china_leader = {
			country_event = rcmchina.217
		}
		effect_tooltip = {
            every_unit_leader = {
				retire = yes
			}
			FROM = {
				annex_country = { target = ROOT transfer_troops = yes }	
			}		
		}

	}
	option = {
		name = EFM_Comchina.50.b
		event_target:WTT_communist_china = { country_event = { id = EFM_Comchina_SIK.44 days = 0 } }
		add_war_support = 0.05
	}
}
country_event = {
	id = EFM_Comchina.51
	title = EFM_Comchina.51.t
	desc = EFM_Comchina.51.d
	picture = GFX_report_event_ningsia_campaign
	is_triggered_only = yes
	option = {
		name = EFM_Comchina.51.a
		FROM = {#guo
			NXM_ma_hongbin = { set_nationality = root }
			NXM_lu_zhongliang = { set_nationality = root }
			NXM_ma_guangzong = { set_nationality = root }
		    every_unit_leader = {
				limit = {
					NOT = {
						is_character = NXM_ma_hongbin
						is_character = NXM_lu_zhongliang
						is_character = NXM_ma_guangzong
					}   
				}
				retire = yes
			}
		}
	    annex_country = { target = NXM transfer_troops = yes }

		event_target:WTT_current_china_leader = { #guo
		every_controlled_state = {
		limit = { is_fully_controlled_by = event_target:WTT_current_china_leader }
			teleport_armies = {
				to_state = 1005
				limit = {
					tag = event_target:WTT_communist_china
					# trigger will be checked for owner of armies and will only teleport if true. scope if the owner of the army and prev is the scope that calls teleport_armies
				}
			}
		}
		}
	}
}

add_namespace = EFM_Comchina_SIK
# Nationwide revolution
#45 to PRC, refuse
country_event = {
	id = EFM_Comchina_SIK.44
	title = EFM_Comchina_SIK.44.t
	desc = {
		text = EFM_Comchina_SIK.44.d
		trigger = {
			FROM = {
				NOT = {
					tag = NXM
				}
			}
		}
	}
	desc = {
		text = EFM_Comchina_SIK.44.d_2
		trigger = {
			FROM = {
				tag = NXM
			}
		}
	}
	picture = GFX_report_event_chinese_japanese_handshake
	is_triggered_only = yes
	option = {
		name = EFM_Comchina_SIK.44.a
		
	}
}
country_event = { #to SIK
	id = EFM_Comchina_SIK.45
	title = EFM_Comchina_SIK.45.t
	desc = EFM_Comchina_SIK.45.d
	picture = GFX_report_event_chinese_japanese_handshake
	is_triggered_only = yes
	immediate = {
		FROM = {
			save_global_event_target_as = SIK_defect_PRC
		}
		save_global_event_target_as = SIK_gov_target
		if = {
			limit = {
				SIK = {
					is_subject = yes
				}
			}
			SIK = {
				overlord = {
					save_global_event_target_as = SIK_overlord_central_gov
				}
			}
		}
		else = {
			event_target:WTT_current_china_leader = {
				save_global_event_target_as = SIK_overlord_central_gov
			}
		}
	}
	option = { #accept
		name = EFM_Comchina_SIK.45.a
		ai_chance = {
			factor = 100
		}
		custom_effect_tooltip = GAME_OVER_TT
		effect_tooltip = {
			if = {
				limit = {
					has_character = CHI_tao_Zhiyue
				}
			    CHI_tao_Zhiyue = {
					set_nationality = FROM
				}
			}
			every_unit_leader = {
				limit = {
					NOT = {
						is_character = CHI_tao_Zhiyue
					}
				}
				retire = yes
			}
			FROM = {
				annex_country = {
					target = ROOT transfer_troops = yes
				}
			}
		}
		
		event_target:SIK_overlord_central_gov = {
			country_event = EFM_Comchina_SIK.46
		}
		event_target:WTT_communist_china = { country_event = EFM_Comchina_SIK.47 }
	}
	option = {
		name = EFM_Comchina_SIK.45.b
		ai_chance = {
			factor = 0
		}
		FROM = { country_event = EFM_Comchina_SIK.44 }
	}
}
country_event = { #to CHI
	id = EFM_Comchina_SIK.46
	title = EFM_Comchina_SIK.46.t
	desc = EFM_Comchina_SIK.46.d
	picture = GFX_report_event_chinese_japanese_handshake
	is_triggered_only = yes
	option = {
		name = EFM_Comchina_SIK.46.a
		effect_tooltip = {
			SIK = {
				if = {
					limit = {
						has_character = CHI_tao_Zhiyue
					}
					CHI_tao_Zhiyue = {
						set_nationality = event_target:SIK_defect_PRC
					}
				}
				every_unit_leader = {
					limit = {
						NOT = {
							is_character = CHI_tao_Zhiyue
						}
					}
					retire = yes
				}
				event_target:SIK_defect_PRC = {
					annex_country = {
						target = SIK transfer_troops = yes
					}
				}
			}
		}
		
	}
}
country_event = { #to PRC
	id = EFM_Comchina_SIK.47
	title = EFM_Comchina_SIK.47.t
	desc = EFM_Comchina_SIK.47.d
	picture = GFX_report_event_chinese_japanese_handshake
	is_triggered_only = yes
	option = {#guo
		name = EFM_Comchina_SIK.47.a
		SIK = {
			if = {
				limit = {
					has_character = CHI_tao_Zhiyue
				}
				CHI_tao_Zhiyue = {
					set_portraits = {
						character = CHI_tao_Zhiyue
						army = { large="gfx/leaders/CHI/Portrait_CHI_Tao_Zhiyue_PRC.dds" }
					}
					set_nationality = ROOT
				}
			}
			if = {
				limit = {
					has_character = CHI_zhang_zhizhong
				}
				CHI_zhang_zhizhong = {
					set_nationality = ROOT
				}
			}
			
			every_unit_leader = {
				limit = {
					NOT = {
						is_character = CHI_tao_Zhiyue
						is_character = CHI_zhang_zhizhong
					}
				}
				retire = yes
			}
			
			if = {
				limit = {
					has_civil_war = yes
					any_enemy_country = {
						original_tag = PREV
						has_government = communism
					}
				}
				random_enemy_country = {
					limit = {
						original_tag = PREV
						has_government = communism
					}
					every_unit_leader = {
						set_nationality = ROOT
					}
					ROOT = {
						annex_country = {
							target = PREV transfer_troops = yes
						}
					}
				}				
			}
            if = {
				limit = {
					has_civil_war = no
					any_other_country = {
						original_tag = PREV
						has_government = communism
					}
				}
				random_other_country = {
					limit = {
						original_tag = PREV
						has_government = communism
					}
					every_unit_leader = {
						set_nationality = ROOT
					}
					ROOT = {
						annex_country = {
							target = PREV transfer_troops = yes
						}
					}
				}				
			}			
		}
		annex_country = {
			target = SIK transfer_troops = yes
		}			
		
		event_target:WTT_current_china_leader = { #guo
		every_controlled_state = {
		limit = { is_fully_controlled_by = event_target:WTT_current_china_leader }
			teleport_armies = {
				to_state = 1005
				limit = {
					tag = event_target:WTT_communist_china
					# trigger will be checked for owner of armies and will only teleport if true. scope if the owner of the army and prev is the scope that calls teleport_armies
				}
			}
		}
		}
	}
}
country_event = { #to PRC (central controls sinkiang) #NEEDS LOC #UNUSED 
	id = EFM_Comchina_SIK.448
	title = EFM_Comchina_SIK.448.t
	desc = EFM_Comchina_SIK.448.d
	picture = GFX_report_event_chinese_japanese_handshake
	is_triggered_only = yes
	option = {
		name = EFM_Comchina_SIK.448.a
		every_state = {
		    limit = {
			    OR = {
				    region = 252
				    region = 145
			    }
			    is_owned_by = event_target:WTT_current_china_leader
			}
			ROOT = { transfer_state = PREV }
		}
		SIK = {
			every_unit_leader = {
				set_nationality = ROOT
			}
		}
		ROOT = {
            if = {
				limit = {		
					any_other_country = {
						original_tag = SIK
						has_government = communism
					}
				}
				random_other_country = {
					limit = {
						original_tag = SIK
						has_government = communism
					}
					ROOT = {
						annex_country = {
							target = PREV transfer_troops = yes
						}
					}
				}				
			}			
		}
		event_target:WTT_current_china_leader = {
		    transfer_units_fraction = {
			    target = ROOT         # the recipient
			    size = 0            # [0,1] Default value for the ratio below if they are not specified
			    army_ratio = 0.05      # [0,1] Overrides size modifier for army
			    keep_unit_leaders_trigger = { # Trigger for unit leaders to remain with the original country
				    always = yes
			    }
			}
		}	
	    event_target:WTT_current_china_leader = {
			country_event = EFM_Comchina_SIK.49
		}
	}
}

country_event = { #to CHI #NEEDS LOC #UNUSED
	id = EFM_Comchina_SIK.49
	title = EFM_Comchina_SIK.96.t
	desc = EFM_Comchina_SIK.49.d
	picture = GFX_report_event_chinese_japanese_handshake
	is_triggered_only = yes
	option = {
		name = EFM_Comchina_SIK.49.a
		effect_tooltip = {
			every_state = {
		        limit = {
			        OR = {
				        region = 252
				        region = 145
			        }
			        is_owned_by = event_target:WTT_current_china_leader
			    }
			    FROM = { transfer_state = PREV }
		    }
			transfer_units_fraction = {
			    target = FROM         # the recipient
			    size = 0            # [0,1] Default value for the ratio below if they are not specified
			    army_ratio = 0.05      # [0,1] Overrides size modifier for army
			    keep_unit_leaders_trigger = { # Trigger for unit leaders to remain with the original country
				    always = yes
			    }
			}
		}
	}
}

# Established diplomatic relations with USSR
country_event = {
	id = EFM_Comchina.100
	title = EFM_Comchina.100.t
	desc = EFM_Comchina.100.d
	picture = GFX_report_event_generic_read_write

	is_triggered_only = yes
	option = {
		name = EFM_Comchina.100.a
	}
}
######################
####Long_March recovery 1->2
country_event = {
	id = EFM_Comchina.199
	title = EFM_Comchina.199.t
	desc = EFM_Comchina.199.d
	picture = GFX_report_event_chinese_soldiers_fighting

	#fire_only_once = yes
	mean_time_to_happen = {
		days = 2
	}
	trigger = {
		tag = PRC
		has_idea = idea_continuous_recover_from_the_long_march
		has_idea = Long_March_1
		has_war_support > 0.3
	}
	option = {
		name = EFM_Comchina.199.a
		swap_ideas = {
			add_idea = Long_March_2
			remove_idea = Long_March_1
		}
		hidden_effect = {
			add_war_support = -0.1
		}
	}
}
####Long_March recovery 2->3
country_event = {
	id = EFM_Comchina.200
	title = EFM_Comchina.200.t
	desc = EFM_Comchina.200.d
	picture = GFX_report_event_chinese_soldiers_fighting

	#fire_only_once = yes

	trigger = {
		tag = PRC
		has_idea = idea_continuous_recover_from_the_long_march
		has_idea = Long_March_2
		has_war_support > 0.4
	}
	mean_time_to_happen = {
		days = 2
	}
	option = {
		name = EFM_Comchina.200.a
		swap_ideas = {
			add_idea = Long_March_3
			remove_idea = Long_March_2
		}
		hidden_effect = {
			add_war_support = -0.1
		}
	}
}
####Long_March recovery 3->4
country_event = {
	id = EFM_Comchina.201
	title = EFM_Comchina.201.t
	desc = EFM_Comchina.201.d
	picture = GFX_report_event_chinese_soldiers_fighting

	#fire_only_once = yes

	trigger = {
		tag = PRC
		has_idea = idea_continuous_recover_from_the_long_march
		has_idea = Long_March_3
		has_war_support > 0.5
	}
	mean_time_to_happen = {
		days = 2
	}
	option = {
		name = EFM_Comchina.201.a
		swap_ideas = {
			add_idea = Long_March_4
			remove_idea = Long_March_3
		}
		hidden_effect = {
			add_war_support = -0.1
		}
	}
}
####Long_March recovery 4->5
country_event = {
	id = EFM_Comchina.202
	title = EFM_Comchina.202.t
	desc = EFM_Comchina.202.d
	picture = GFX_report_event_chinese_soldiers_fighting

	#fire_only_once = yes

	trigger = {
		tag = PRC
		has_idea = idea_continuous_recover_from_the_long_march
		has_idea = Long_March_4
		has_war_support > 0.6
	}
	mean_time_to_happen = {
		days = 2
	}
	option = {
		name = EFM_Comchina.202.a
		swap_ideas = {
			add_idea = Long_March_5
			remove_idea = Long_March_4
		}
		hidden_effect = {
			add_war_support = -0.1
		}
	}
}
####Long_March recovery 5->no
country_event = {
	id = EFM_Comchina.203
	title = EFM_Comchina.203.t
	desc = EFM_Comchina.203.d
	picture = GFX_report_event_chinese_soldiers_fighting

	#fire_only_once = yes

	trigger = {
		tag = PRC
		has_idea = idea_continuous_recover_from_the_long_march
		has_idea = Long_March_5
		has_war_support > 0.7
	}
	mean_time_to_happen = {
		days = 2
	}
	option = {
		name = EFM_Comchina.203.a
		remove_ideas = Long_March_5
		hidden_effect = {
			add_war_support = -0.1
		}
	}
}
###########################
####Long_March drop 5->4
country_event = {
	id = EFM_Comchina.204
	title = EFM_Comchina.204.t
	desc = EFM_Comchina.204.d
	picture = GFX_report_event_chinese_soldiers_fighting

	#fire_only_once = yes

	trigger = {
		tag = PRC
		has_idea = idea_continuous_recover_from_the_long_march
		has_idea = Long_March_5
		has_war_support < 0.6
	}
	mean_time_to_happen = {
		days = 2
	}
	option = {
		name = EFM_Comchina.204.a
		swap_ideas = {
			add_idea = Long_March_4
			remove_idea = Long_March_5
		}
		hidden_effect = {
			add_war_support = -0.1
		}
	}
}
####Long_March drop 4->3
country_event = {
	id = EFM_Comchina.205
	title = EFM_Comchina.205.t
	desc = EFM_Comchina.205.d
	picture = GFX_report_event_chinese_soldiers_fighting

	#fire_only_once = yes

	trigger = {
		tag = PRC
		has_idea = idea_continuous_recover_from_the_long_march
		has_idea = Long_March_4
		has_war_support < 0.5
	}
	mean_time_to_happen = {
		days = 2
	}
	option = {
		name = EFM_Comchina.205.a
		swap_ideas = {
			add_idea = Long_March_3
			remove_idea = Long_March_4
		}
		hidden_effect = {
			add_war_support = -0.1
		}
	}
}
####Long_March drop 3->2
country_event = {
	id = EFM_Comchina.206
	title = EFM_Comchina.206.t
	desc = EFM_Comchina.206.d
	picture = GFX_report_event_chinese_soldiers_fighting

	#fire_only_once = yes

	trigger = {
		tag = PRC
		has_idea = idea_continuous_recover_from_the_long_march
		has_idea = Long_March_3
		has_war_support < 0.4
	}
	mean_time_to_happen = {
		days = 2
	}
	option = {
		name = EFM_Comchina.206.a
		swap_ideas = {
			add_idea = Long_March_2
			remove_idea = Long_March_3
		}
		hidden_effect = {
			add_war_support = -0.1
		}
	}
}
####Long_March drop 2->1
country_event = {
	id = EFM_Comchina.207
	title = EFM_Comchina.207.t
	desc = EFM_Comchina.207.d
	picture = GFX_report_event_chinese_soldiers_fighting

	#fire_only_once = yes

	trigger = {
		tag = PRC
		has_idea = idea_continuous_recover_from_the_long_march
		has_idea = Long_March_2
		has_war_support < 0.3
	}
	mean_time_to_happen = {
		days = 2
	}
	option = {
		name = EFM_Comchina.207.a
		swap_ideas = {
			add_idea = Long_March_1
			remove_idea = Long_March_2
		}
		hidden_effect = {
			add_war_support = -0.1
		}
	}
}
###NORTH CHINA INSURGENCY
country_event = {
	id = EFM_Comchina.208
	title = EFM_Comchina.208.t
	desc = EFM_Comchina.208.d
	picture = GFX_report_report_event_chinese_officers

	#fire_only_once = yes

	is_triggered_only = yes
	option = {
		name = EFM_Comchina.208.a
		custom_effect_tooltip = PRC_North_China_Insurgency_done_tt
		add_ideas = north_china_turned_red_idea
	}
}
###MANCH INSURGENCY
country_event = {
	id = EFM_Comchina.209
	title = EFM_Comchina.209.t
	desc = EFM_Comchina.209.d
	picture = GFX_report_report_event_chinese_officers

	#fire_only_once = yes

	is_triggered_only = yes
	option = {
		name = EFM_Comchina.209.a
		custom_effect_tooltip = PRC_Manchuria_Insurgency_done_tt
		add_ideas = dongbei_turned_red_idea
	}
}
###INNER MON INSURGENCY
country_event = {
	id = EFM_Comchina.210
	title = EFM_Comchina.210.t
	desc = EFM_Comchina.210.d
	picture = GFX_report_event_chinese_officers

	#fire_only_once = yes

	is_triggered_only = yes
	option = {
		name = EFM_Comchina.210.a
		custom_effect_tooltip = PRC_Inner_Mongolia_Insurgency_done_tt
		#add_ideas = inner_mong_turned_red_idea
	}
}
# PRC into west (NXM, GSM) 2nd time
country_event = {
	id = EFM_Comchina.211
	title = EFM_Comchina.211.t
	desc = EFM_Comchina.211.d
	picture = GFX_report_event_chinese_soldiers_fighting

	fire_only_once = yes
	is_triggered_only = yes
	immediate = {
	}
	option = {
		name = EFM_Comchina.211.a
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
		trigger = {
			country_exists = NXM
			NOT = {
				is_in_faction_with = NXM
			}
		}
		set_country_flag = went_with_ningxia_plan
		declare_war_on = { target = NXM type = annex_everything }
	}
	option = {
		name = EFM_Comchina.211.b
		trigger = {
			country_exists = GSM
			NOT = {
				is_in_faction_with = GSM
			}
		}
		ai_chance = {
			factor = 10
		}
		custom_effect_tooltip = THIS_IS_HISTORICAL_TT
		set_country_flag = went_with_gansu_plan
		declare_war_on = { target = GSM type = annex_everything }
	}
}
country_event = {  #NXM win (to PRC)
	id = EFM_Comchina.2117
	title = EFM_Comchina.2117.t
	desc = EFM_Comchina.2117.d
	picture = GFX_report_event_chinese_soldiers_fighting

	fire_only_once = yes
	is_triggered_only = yes
	trigger = {
		NOT = { country_exists = NXM }
		has_country_flag = went_with_ningxia_plan
	}
	option = {
		name = EFM_Comchina.2117.a
		add_ideas = PRC_Victory_in_the_west
		add_stability = 0.05
		add_political_power = 100
		
		set_temp_variable = { temp_member = 1 }
		set_temp_variable = { temp_seats = 0.30 tooltip = ZHANG_faction_support_tt } #GUO
							#percentage
		modify_parliament_seat = yes
		hidden_effect = {
			set_country_flag = PRC_west_expedition_victory
		}
	}
}
country_event = {  #NXM PRC lose (to NXM)
	id = EFM_Comchina.2118
	title = EFM_Comchina.2118.t
	desc = EFM_Comchina.2118.d
	picture = GFX_report_event_west_route_army_failed

	fire_only_once = yes
	is_triggered_only = yes
	option = {
		name = EFM_Comchina.2118.a
		add_stability = 0.05
		add_political_power = 100
	}
}
country_event = { #NXM lose completely (to PRC)
	id = EFM_Comchina.2119
	title = EFM_Comchina.2119.t
	desc = EFM_Comchina.2119.d
	picture = GFX_report_event_west_route_army_failed
	fire_only_once = yes
	is_triggered_only = yes
	trigger = {
		country_exists = NXM
		has_country_flag = went_with_ningxia_plan
		NOT = {
			1044 = {
				is_controlled_by = PRC
			}
		}
	}
	immediate = {
		hidden_effect = {
			set_country_flag = no_PRC_west_expedition_victory
		}
	}
	option = {
		name = EFM_Comchina.2119.a
		white_peace = NXM
		add_political_power = -50
		add_stability = -0.1
		add_manpower = -10000
		NXM = { country_event = { id = EFM_Comchina.2118 } }
		NXM = {
			transfer_state = 1044
		}
		set_temp_variable = { temp_member = 1 }
		set_temp_variable = { temp_seats = -0.15 tooltip = ZHANG_faction_support_tt }
							#percentage
		modify_parliament_seat = yes
		hidden_effect = {
			set_country_flag = no_PRC_west_expedition_victory
		}
	}
}
country_event = { #NXM lose stalemate (to PRC)
	id = EFM_Comchina.2120
	title = EFM_Comchina.2120.t
	desc = EFM_Comchina.2120.d
	picture = GFX_report_event_west_route_army_failed
	fire_only_once = yes
	is_triggered_only = yes
	trigger = {
		country_exists = NXM
		has_country_flag = went_with_ningxia_plan
		1044 = {
			is_controlled_by = PRC
		}
	}
	immediate = {
		hidden_effect = {
			set_country_flag = no_PRC_west_expedition_victory
		}
	}
	option = {
		name = EFM_Comchina.2120.a
		white_peace = NXM
		add_political_power = -50
		add_stability = -0.1
		add_manpower = -3000
		NXM = { country_event = { id = EFM_Comchina.2121 } }
		NXM = {
			transfer_state = 1044
		}
		
		set_temp_variable = { temp_member = 1 }
		set_temp_variable = { temp_seats = -0.15 tooltip = ZHANG_faction_support_tt }
							#percentage
		modify_parliament_seat = yes
		hidden_effect = {
			set_country_flag = no_PRC_west_expedition_victory
		}
	}
}
country_event = {  #NXM PRC stalemate (to NXM)
	id = EFM_Comchina.2121
	title = EFM_Comchina.2121.t
	desc = EFM_Comchina.2121.d
	picture = GFX_report_event_west_route_army_failed

	fire_only_once = yes
	is_triggered_only = yes
	option = {
		name = EFM_Comchina.2121.a
		effect_tooltip = {
			NXM = {
				transfer_state = 1044
			}
		}
	}
}

#GSM

add_namespace = EFM_Comchina_GSM
country_event = {  #GSM win (to PRC)
	id = EFM_Comchina_GSM.2117
	title = EFM_Comchina_GSM.2117.t
	desc = EFM_Comchina_GSM.2117.d
	picture = GFX_report_event_chinese_soldiers_fighting

	fire_only_once = yes
	is_triggered_only = yes
	trigger = {
		OR = {
			NOT = { country_exists = GSM }
			AND = {
				has_full_control_of_state = 756
			    GSM = {
				    has_capitulated = yes
				}
			}
		}	
		has_country_flag = went_with_gansu_plan
	}
	option = {
		name = EFM_Comchina_GSM.2117.a
		add_ideas = PRC_Victory_in_the_west
		add_stability = 0.05
		add_political_power = 100
		set_temp_variable = { temp_member = 1 }
		set_temp_variable = { temp_seats = 0.30 tooltip = ZHANG_faction_support_tt } #GUO
							#percentage
		modify_parliament_seat = yes
		if = {
			limit = {
				country_exists = GSM
				GSM = {
				    has_capitulated = yes
				}
			}
			annex_country = {
				target = GSM
				transfer_troops = no
			}
		}
		hidden_effect = {
			set_country_flag = PRC_west_expedition_victory
		}
	}
}
country_event = {  #GSM PRC lose (to GSM)
	id = EFM_Comchina_GSM.2118
	title = EFM_Comchina_GSM.2118.t
	desc = EFM_Comchina_GSM.2118.d
	picture = GFX_report_event_west_route_army_failed

	fire_only_once = yes
	is_triggered_only = yes
	option = {
		name = EFM_Comchina_GSM.2118.a
		add_stability = 0.05
		add_political_power = 100
	}
}
country_event = { #GSM lose completely (to PRC)
	id = EFM_Comchina_GSM.2119
	title = EFM_Comchina_GSM.2119.t
	desc = EFM_Comchina_GSM.2119.d
	picture = GFX_report_event_west_route_army_failed
	fire_only_once = yes
	is_triggered_only = yes
	trigger = {
		country_exists = GSM
		NOT = {
			GSM = {
				has_capitulated = yes
			}
		}
		has_country_flag = went_with_gansu_plan
		NOT = {
			1044 = {
				is_controlled_by = PRC
			}
		}
	}
	immediate = {
		hidden_effect = {
			set_country_flag = no_PRC_west_expedition_victory
		}
	}
	option = {
		name = EFM_Comchina_GSM.2119.a
		white_peace = GSM
		add_political_power = -50
		add_stability = -0.1
		#add_manpower = -10000
		custom_effect_tooltip = disband_all_troops_in_hosi_tt
		delete_unit = {
			state = 756
			disband = yes 
		}
		GSM = { country_event = { id = EFM_Comchina_GSM.2118 } }
		NXM = { #give it back to ningsia
			transfer_state = 1044
		}
		#XSM = { 
	    #    annex_country = {
		#        target = GSM transfer_troops = yes
		#	}
		#}
		set_temp_variable = { temp_member = 1 }
		set_temp_variable = { temp_seats = -0.15 tooltip = ZHANG_faction_support_tt }
							#percentage
		modify_parliament_seat = yes
		hidden_effect = {
			set_country_flag = no_PRC_west_expedition_victory
		}
	}
}
country_event = { #GSM lose stalemate (to PRC)
	id = EFM_Comchina_GSM.2120
	title = EFM_Comchina_GSM.2120.t
	desc = EFM_Comchina_GSM.2120.d
	picture = GFX_report_event_west_route_army_failed
	fire_only_once = yes
	is_triggered_only = yes
	trigger = {
		country_exists = GSM
		NOT = {
			GSM = {
				has_capitulated = yes
			}
		}
		has_country_flag = went_with_gansu_plan
		1044 = {
			is_controlled_by = PRC
		}
	}
	immediate = {
		hidden_effect = {
			set_country_flag = no_PRC_west_expedition_victory
		}
	}
	option = {
		name = EFM_Comchina_GSM.2120.a
		white_peace = GSM
		add_political_power = -50
		add_stability = -0.1
		#add_manpower = -3000
		custom_effect_tooltip = disband_all_troops_in_hosi_tt
		delete_unit = {
			state = 756
			disband = yes 
		}
		GSM = { country_event = { id = EFM_Comchina_GSM.2121 } }
		NXM = {
			transfer_state = 1044
		}
		#hidden_effect = {
		#    GSM = {
		#	    every_unit_leader = {
		#	        limit = {
		#		        has_id = 3004
		#	        }
		#	        set_nationality = XSM
		#        }
		#	}
		#}
		#XSM = { 
	    #    annex_country = {
		#        target = GSM transfer_troops = yes
		#	}
		#}
		set_temp_variable = { temp_member = 1 }
		set_temp_variable = { temp_seats = -0.15 tooltip = ZHANG_faction_support_tt }
							#percentage
		modify_parliament_seat = yes
		hidden_effect = {
			set_country_flag = no_PRC_west_expedition_victory
		}
	}
}
country_event = {  #GSM PRC stalemate (to GSM)
	id = EFM_Comchina_GSM.2121
	title = EFM_Comchina_GSM.2121.t
	desc = EFM_Comchina_GSM.2121.d
	picture = GFX_report_event_west_route_army_failed

	fire_only_once = yes
	is_triggered_only = yes
	option = {
		name = EFM_Comchina_GSM.2121.a
		effect_tooltip = {
			NXM = {
				transfer_state = 1044
			}
		    #XSM = { 
	        #    annex_country = {
		    #        target = GSM transfer_troops = yes
			#    }
		    #}
		}
	    #custom_effect_tooltip = GAME_OVER_TT
	}
}
#kmt truce
country_event = {
	id = EFM_Comchina.213
	title = EFM_Comchina.213.t
	desc = EFM_Comchina.213.d
	picture = GFX_report_event_japanese_chinese_surrender

	is_triggered_only = yes

	# Agree to a truce
	option = {
		name = rcmsoviet.19.a
		ai_chance = { factor = 100 }
		set_global_flag = CHI_unite_PRC
		add_opinion_modifier = {
			target = FROM modifier = CHI_prc_reconciliation
		}
		reverse_add_opinion_modifier = {
			target = FROM modifier = CHI_prc_reconciliation
		}
		hidden_effect = {
			FROM = { unlock_national_focus = CHI_Truce_of_the_Civil_War }
		}
		FROM = {
			white_peace = PRC
		}
		FROM = {
			country_event = {
				id = EFM_Comchina.214
			}
		}
	}
	option = {
		name = EFM_Comchina.213.a
		custom_effect_tooltip = this_will_lead_to_war_tt
		FROM = {
			country_event = {
				id = EFM_Comchina.215
			}
		}
	}
}
country_event = {  #PRC accept (to KMT)
	id = EFM_Comchina.214
	title = EFM_Comchina.214.t
	desc = EFM_Comchina.214.d
	picture = GFX_report_event_japanese_chinese_surrender

	fire_only_once = yes
	is_triggered_only = yes
	option = {
		name = EFM_Comchina.214.a
	}
}
country_event = {  #PRC refuse (to KMT)
	id = EFM_Comchina.215
	title = EFM_Comchina.215.t
	desc = EFM_Comchina.215.d
	picture = GFX_report_event_chinese_soldiers_fighting

	fire_only_once = yes
	is_triggered_only = yes
	option = {
		name = EFM_Comchina.215.a
		if = {
			limit = {
				TAG = CHI
			}
			complete_national_focus = CHI_Encirclement_Campaign_focus
			else = {
				create_wargoal = {
					type = annex_everything target = FROM
				}
			}
		}
	}
}
###training program
country_event = {  #start training
	id = EFM_Comchina.216
	title = EFM_Comchina.216.t
	desc = EFM_Comchina.216.d
	picture = GFX_report_event_training_program
	is_triggered_only = yes

	immediate = {
		#hidden_effect = {
			if = {
				limit = {
					has_idea = PRC_no_skilled_personnel_1
				}
				add_timed_idea = {
					idea = training_program_marker_1 days = 360
				}
				add_timed_idea = {
					idea = training_program_marker_2 days = 270
				}
				add_timed_idea = {
					idea = training_program_marker_3 days = 180
				}
				add_timed_idea = {
					idea = training_program_marker_4 days = 90
				}
			}
			if = {
				limit = {
					has_idea = PRC_no_skilled_personnel_2
				}
				add_timed_idea = {
					idea = training_program_marker_2 days = 270
				}
				add_timed_idea = {
					idea = training_program_marker_3 days = 180
				}
				add_timed_idea = {
					idea = training_program_marker_4 days = 90
				}
			}
			if = {
				limit = {
					has_idea = PRC_no_skilled_personnel_3
				}
				add_timed_idea = {
					idea = training_program_marker_3 days = 180
				}
				add_timed_idea = {
					idea = training_program_marker_4 days = 90
				}
			}
			if = {
				limit = {
					has_idea = PRC_no_skilled_personnel_4
				}
				add_timed_idea = {
					idea = training_program_marker_4 days = 90
				}
			}
		#}
	}
	is_triggered_only = yes
	option = {
		name = EFM_Comchina.216.a
	}

}
###training program V->H
country_event = {  #start training
	id = EFM_Comchina.217
	title = EFM_Comchina.217.t
	desc = EFM_Comchina.217.d
	picture = GFX_report_event_new_personnel_batch
	trigger = {
		has_idea = idea_continuous_specialized_training_program
		has_idea = PRC_no_skilled_personnel_1
		NOT = {
			has_idea = training_program_marker_1
		}
	}
	mean_time_to_happen = {
		days = 2
	}
	immediate = {
		hidden_effect = {
			swap_ideas = {
				remove_idea = PRC_no_skilled_personnel_1
				add_idea = PRC_no_skilled_personnel_2
			}
		}
	}
	option = {
		name = EFM_Comchina.217.a
		effect_tooltip = {
			swap_ideas = {
				remove_idea = PRC_no_skilled_personnel_1
				add_idea = PRC_no_skilled_personnel_2
			}
		}
	}
}
###training program H->M
country_event = {  #start training
	id = EFM_Comchina.218
	title = EFM_Comchina.218.t
	desc = EFM_Comchina.218.d
	picture = GFX_report_event_new_personnel_batch
	trigger = {
		has_idea = idea_continuous_specialized_training_program
		has_idea = PRC_no_skilled_personnel_2
		NOT = {
			has_idea = training_program_marker_2
		}
	}
	mean_time_to_happen = {
		days = 2
	}
	immediate = {
		hidden_effect = {
			swap_ideas = {
				remove_idea = PRC_no_skilled_personnel_2
				add_idea = PRC_no_skilled_personnel_3
			}
		}
	}
	option = {
		name = EFM_Comchina.218.a
		effect_tooltip = {
			swap_ideas = {
				remove_idea = PRC_no_skilled_personnel_2
				add_idea = PRC_no_skilled_personnel_3
			}
		}
	}
}
###training program M->L
country_event = {  #start training
	id = EFM_Comchina.219
	title = EFM_Comchina.219.t
	desc = EFM_Comchina.219.d
	picture = GFX_report_event_new_personnel_batch
	trigger = {
		has_idea = idea_continuous_specialized_training_program
		has_idea = PRC_no_skilled_personnel_3
		NOT = {
			has_idea = training_program_marker_3
		}
	}
	mean_time_to_happen = {
		days = 2
	}
	immediate = {
		hidden_effect = {
			swap_ideas = {
				remove_idea = PRC_no_skilled_personnel_3
				add_idea = PRC_no_skilled_personnel_4
			}
		}
	}
	option = {
		name = EFM_Comchina.219.a
		effect_tooltip = {
			swap_ideas = {
				remove_idea = PRC_no_skilled_personnel_3
				add_idea = PRC_no_skilled_personnel_4
			}
		}
	}
}
###training program L->None
country_event = {  #start training
	id = EFM_Comchina.220
	title = EFM_Comchina.220.t
	desc = EFM_Comchina.220.d
	picture = GFX_report_event_new_personnel_batch
	trigger = {
		has_idea = idea_continuous_specialized_training_program
		has_idea = PRC_no_skilled_personnel_4
		NOT = {
			has_country_flag = training_program_marker_4
		}
	}
	mean_time_to_happen = {
		days = 2
	}
	immediate = {
		hidden_effect = {
			remove_ideas = PRC_no_skilled_personnel_4
		}
	}
	option = {
		name = EFM_Comchina.220.a
		effect_tooltip = {
			remove_ideas = PRC_no_skilled_personnel_4
		}
	}
}
###training program interrupted
country_event = {
	id = EFM_Comchina.221
	title = EFM_Comchina.221.t
	desc = EFM_Comchina.221.d
	picture = GFX_report_event_sinkiang_join_PRC
	trigger = {
		NOT = {
			has_idea = idea_continuous_specialized_training_program
		}
		OR = {
			has_country_flag = training_program_marker_1
			has_country_flag = training_program_marker_2
			has_country_flag = training_program_marker_3
			has_country_flag = training_program_marker_4
		}
		OR = {
			has_idea = PRC_no_skilled_personnel_1
			has_idea = PRC_no_skilled_personnel_2
			has_idea = PRC_no_skilled_personnel_3
			has_idea = PRC_no_skilled_personnel_4
		}
	}
	mean_time_to_happen = {
		days = 2
	}
	immediate = {
		hidden_effect = {
			clr_country_flag = training_program_marker_1
			clr_country_flag = training_program_marker_2
			clr_country_flag = training_program_marker_3
			clr_country_flag = training_program_marker_4
		}
	}
	option = {
		name = EFM_Comchina.221.a
	}
}

#military dictatorship
country_event = {
	id = EFM_Comchina.222
	title = EFM_Comchina.222.t
	desc = EFM_Comchina.222.d
	picture = GFX_report_event_guotao
	is_triggered_only = yes
	
	option = {
		name = EFM_Comchina.222.a
		add_ideas = militarism_focus
		add_ideas = paramilitarism_focus
	}
}

#new nation
country_event = {
	id = EFM_Comchina.223
	title = EFM_Comchina.223.t
	desc = EFM_Comchina.223.d
	picture = GFX_report_founding_ceremony
	is_triggered_only = yes
	
	option = {
		name = EFM_Comchina.223.a
		set_capital = { state = 608 }
		add_political_power = 150
		add_stability = 0.05
	    set_province_name = { id = 9843 name = "Peking" } #ADDED IN 1.11
		
		608 = { #guo
        add_victory_points = {
				province = 9843
				value = 30
			}
        }
	}
}

#chinese soviet republic
country_event = {
	id = EFM_Comchina.224
	title = EFM_Comchina.224.t
	desc = EFM_Comchina.224.d
	picture = GFX_report_event_sinkiang_join_PRC
	is_triggered_only = yes
	
	option = {
		name = EFM_Comchina.224.a
		set_capital = { state = 1030 } #guo
		1030 = { #guo
        add_victory_points = {
				province = 8049
				value = 30
			}
        }
		add_political_power = 75
		add_stability = 0.05 #guo
	}
}

#federation
country_event = {
	id = EFM_Comchina.225
	title = EFM_Comchina.225.t
	desc = EFM_Comchina.225.d
	picture = GFX_report_event_sinkiang_join_PRC
	is_triggered_only = yes
	
	option = {
		name = EFM_Comchina.225.a
		set_capital = { state = 744 } #guo
		744 = { #guo
        add_victory_points = {
				province = 7301
				value = 30
			}
        }
		add_political_power = 75 #guo
		add_stability = 0.05 #guo
	}
}

country_event = { #
	id = EFM_Comchina.226
	immediate = {log = "[GetDateText]: [Root.GetName]: event EFM_Comchina.226"}
	title = EFM_Comchina.226.t
	desc = EFM_Comchina.226.d
	#picture = 
	
	is_triggered_only = yes
	fire_only_once = yes
	
	option = { #
		name = EFM_Comchina.226.a
		ai_chance = { factor = 1 }
		
	}
}